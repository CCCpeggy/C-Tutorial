<!-- slide -->
# pointer2

<!-- slide -->
先來上星期的補充+複習

<!-- slide -->
```ditaa {cmd=true args=["-E"]}

    +-----+-----+-----+-----+-----+-----+-----+-----+
arr |  0  |  1  |  2  |  3  |  4  |  5  |  6  |  7  |
    +-----+-----+-----+-----+-----+-----+-----+-----+
      0x00  0x04  0x08  0x0c  0x10  0x14  0x18  0x1c

                   ^
    +------+       |
ptr | 0x08 +-------+
    +------+
```

要如何用程式表達這張圖片？

<!-- slide -->
``` c
int arr[] = {0, 1, 2, 3, 4, 5, 6, 7};
int * ptr = arr + 2;
```

<!-- slide -->
``` C
arr; // 0x00
```

```ditaa {cmd=true args=["-E"]}

    +------+
arr | 0x00 |
    ++-----+
     |
     v
+-----+-----+-----+-----+-----+-----+-----+-----+
|  0  |  1  |  2  |  3  |  4  |  5  |  6  |  7  |
+-----+-----+-----+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10  0x14  0x18  0x1c]
```

<!-- slide -->
``` C
arr + 2; // 0x08
```

```ditaa {cmd=true args=["-E"]}

    +------+
arr | 0x00 |
    ++-----+
     |
     v
+-----+-----+-----+-----+-----+-----+-----+-----+
|  0  |  1  |  2  |  3  |  4  |  5  |  6  |  7  |
+-----+-----+-----+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10  0x14  0x18  0x1c

               ^
               |
arr + 2 -------+
```

<!-- slide -->
``` C
int *ptr = arr + 2; //ptr = 0x08
```

```ditaa {cmd=true args=["-E"]}

    +------+
arr | 0x00 |
    ++-----+
     |
     v
+-----+-----+-----+-----+-----+-----+-----+-----+
|  0  |  1  |  2  |  3  |  4  |  5  |  6  |  7  |
+-----+-----+-----+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10  0x14  0x18  0x1c

               ^
    +------+   |
ptr | 0x08 +---+
    +------+
```

<!-- slide -->
```ditaa {cmd=true args=["-E"]}
* ptr = ddd
    +------+
ptr | 0x08 +
    +------+
```

<!-- slide -->
## 相當於以下的寫法

<!-- slide -->
``` c
int arr[] = {0, 1, 2, 3, 4, 5, 6, 7};
int * ptr;
ptr = arr + 2;
```

<!-- slide -->
``` c
int arr[] = {0, 1, 2, 3, 4, 5, 6, 7};
int * ptr = &arr[0];
```

<!-- slide -->
``` C
arr[2]; // 2
```

```ditaa {cmd=true args=["-E"]}
             arr[2]
+-----+-----+-----+-----+-----+-----+-----+-----+
:  0  :  1  |  2  |  3  :  4  :  5  :  6  :  7  :
+-----+-----+-----+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10  0x14  0x18  0x1c
```

<!-- slide -->
``` C
&arr[2]; // 0x08
```

```ditaa {cmd=true args=["-E"]}
             arr[2]
+-----+-----+-----+-----+-----+-----+-----+-----+
:  0  :  1  |  2  |  3  :  4  :  5  :  6  :  7  :
+-----+-----+-----+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10  0x14  0x18  0x1c
```

<!-- slide -->
``` C
int *ptr = &arr[2]; // ptr = 0x08
```

```ditaa {cmd=true args=["-E"]}
             arr[2]
+-----+-----+-----+-----+-----+-----+-----+-----+
|  0  |  1  |  2  |  3  |  4  |  5  |  6  |  7  |
+-----+-----+-----+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10  0x14  0x18  0x1c

               ^
    +------+   |
ptr | 0x08 +---+
    +------+
```

<!-- slide -->
## ++與*結合

<!-- slide -->
### 優先度
`++`與`*（指標）`的符號優先度是一樣的
所以優先順序是從**右到左**來判斷

<!-- slide -->
判斷以下的表示方式
分別代表什麼意思

``` C
*++ptr
++*ptr
*ptr++
```

<!-- slide -->
``` C
int a = *++ptr;
```

<!-- slide -->
初始狀態

```ditaa {cmd=true args=["-E"]}
+-----+-----+-----+-----+-----+-----+-----+-----+
|  0  |  1  |  2  |  3  |  4  |  5  |  6  |  7  |
+-----+-----+-----+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10  0x14  0x18  0x1c

               ^
     +------+  |
ptr  | 0x08 +--+
     +------+
```

<!-- slide -->
``` C
++ptr; // 0x3c
```

```ditaa {cmd=true args=["-E"]}
+-----+-----+-----+-----+-----+-----+-----+-----+
|  0  |  1  |  2  |  3  |  4  |  5  |  6  |  7  |
+-----+-----+-----+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10  0x14  0x18  0x1c

                     ^
     +------+        |
ptr  | 0x0c +--------+
     +------+
```

<!-- slide -->
``` C
*++ptr; // 3
```

```ditaa {cmd=true args=["-E"]}
+-----+-----+-----+-----+-----+-----+-----+-----+
:  0  :  1  :  2  |  3  |  4  :  5  :  6  :  7  :
+-----+-----+-----+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10  0x14  0x18  0x1c

                     ^
     +------+        |
ptr  | 0x0c +--------+
     +------+

```

<!-- slide -->
``` C
int a = *++ptr; //a = 3
```

```ditaa {cmd=true args=["-E"]}
+-----+-----+-----+-----+-----+-----+-----+-----+
:  0  :  1  :  2  |  3  |  4  :  5  :  6  :  7  :
+-----+-----+-----+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10  0x14  0x18  0x1c

                     ^
     +------+        |
ptr  | 0x0c +--------+
     +------+

     +-----+
a    |  3  |
     +-----+

```


<!-- slide -->
``` C
int a = ++*ptr;
```

<!-- slide -->
初始狀態

```ditaa {cmd=true args=["-E"]}
+-----+-----+-----+-----+-----+-----+-----+-----+
|  0  |  1  |  2  |  3  |  4  |  5  |  6  |  7  |
+-----+-----+-----+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10  0x14  0x18  0x1c

               ^
     +------+  |
ptr  | 0x08 +--+
     +------+
```

<!-- slide -->
``` C
*ptr; // 2
```

```ditaa {cmd=true args=["-E"]}
+-----+-----+-----+-----+-----+-----+-----+-----+
|  0  |  1  |  2  |  3  |  4  |  5  |  6  |  7  |
+-----+-----+-----+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10  0x14  0x18  0x1c

                ^
     +------+   |
ptr  | 0x08 +---+
     +------+
```

<!-- slide -->
``` C
++*ptr; // 3
```

```ditaa {cmd=true args=["-E"]}
+-----+-----+-----+-----+-----+-----+-----+-----+
:  0  :  1  :  3  |  3  |  4  :  5  :  6  :  7  :
+-----+-----+-----+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10  0x14  0x18  0x1c

                ^
     +------+   |
ptr  | 0x08 +---+
     +------+
```

<!-- slide -->
``` C
int a = ++*ptr; //a = 3
```

```ditaa {cmd=true args=["-E"]}
+-----+-----+-----+-----+-----+-----+-----+-----+
:  0  :  1  :  3  |  3  |  4  :  5  :  6  :  7  :
+-----+-----+-----+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10  0x14  0x18  0x1c

                ^
     +------+   |
ptr  | 0x08 +---+
     +------+

     +-----+
a    |  3  |
     +-----+

```

<!-- slide -->
``` C
int a = *ptr**;
```

<!-- slide -->
初始狀態

```ditaa {cmd=true args=["-E"]}
+-----+-----+-----+-----+-----+-----+-----+-----+
|  0  |  1  |  2  |  3  |  4  |  5  |  6  |  7  |
+-----+-----+-----+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10  0x14  0x18  0x1c

               ^
     +------+  |
ptr  | 0x08 +--+
     +------+
```

<!-- slide -->
``` C
ptr++; // 0x08
```

```ditaa {cmd=true args=["-E"]}
+-----+-----+-----+-----+-----+-----+-----+-----+
|  0  |  1  |  2  |  3  |  4  |  5  |  6  |  7  |
+-----+-----+-----+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10  0x14  0x18  0x1c

                ^
     +------+   |
ptr  | 0x08 +---+
     +------+
```

<!-- slide -->
``` C
*ptr++; // *(0x08) = 2
```

```ditaa {cmd=true args=["-E"]}
+-----+-----+-----+-----+-----+-----+-----+-----+
:  0  :  1  |  2  |  3  :  4  :  5  :  6  :  7  :
+-----+-----+-----+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10  0x14  0x18  0x1c

               ^
     +------+  |
ptr  | 0x0c +--+
     +------+
```


<!-- slide -->
``` C
*ptr++; //ptr = 0x0c
```

```ditaa {cmd=true args=["-E"]}
+-----+-----+-----+-----+-----+-----+-----+-----+
|  0  |  1  |  2  |  3  |  4  |  5  |  6  |  7  |
+-----+-----+-----+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10  0x14  0x18  0x1c

                     ^
     +------+        |
ptr  | 0x0c +--------+
     +------+
```

<!-- slide -->
``` C
int a = *ptr++; //a = 2
```

```ditaa {cmd=true args=["-E"]}
+-----+-----+-----+-----+-----+-----+-----+-----+
:  0  :  1  :  2  |  3  |  4  :  5  :  6  :  7  :
+-----+-----+-----+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10  0x14  0x18  0x1c

                     ^
     +------+        |
ptr  | 0x0c +--------+
     +------+

     +-----+
a    |  2  |
     +-----+

```

<!-- slide -->

## 練習1

<!-- slide -->

請嘗試敘述這三個的差別

``` C
*++ptr
++*ptr
*ptr++
```

<!-- slide -->
## 題目1

<!-- slide -->
請嘗試練習用前面的方式，將陣列的值依依的輸出

<!-- slide -->
### 題目1-框架

``` C
#include <stdio.h>
void outputArr(int arr[], int size){

}

int main(){
    int arr[] = {0, 1, 2, 3, 4};
    outputArr(arr, 5);
}
```

<!-- slide -->
### 題目1-圖解


```ditaa {cmd=true args=["-E"]}
+-----+-----+-----+-----+-----+
|  0  |  1  |  2  |  3  |  4  |
+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10
```

<!-- slide -->
``` C
int *ptr = arr;
```

```ditaa {cmd=true args=["-E"]}
+-----+-----+-----+-----+-----+
|  0  |  1  |  2  |  3  |  4  |
+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10

   ^
   |
   +-----+
         |
     +---+--+
ptr  | 0x00 |
     +------+
```

<!-- slide -->
``` C
ptr++;
```

```ditaa {cmd=true args=["-E"]}
+-----+-----+-----+-----+-----+
|  0  |  1  |  2  |  3  |  4  |
+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10

   ^
   |
   +-----+
         |
     +---+--+
ptr  | 0x00 |
     +------+
```

<!-- slide -->
``` C
printf("%d", *ptr++); // 0
```

```ditaa {cmd=true args=["-E"]}
+-----+-----+-----+-----+-----+
|  0  |  1  |  2  |  3  |  4  |
+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10

   ^
   |
   +-----+
         |
     +---+--+
ptr  | 0x00 |
     +------+
```

<!-- slide -->
``` C
printf("%d", *ptr++);
```

```ditaa {cmd=true args=["-E"]}
+-----+-----+-----+-----+-----+
|  0  |  1  |  2  |  3  |  4  |
+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10

         ^
         |
         |
     +---+--+
ptr  | 0x04 |
     +------+
```

<!-- slide -->
``` C
ptr++;
```

```ditaa {cmd=true args=["-E"]}
+-----+-----+-----+-----+-----+
|  0  |  1  |  2  |  3  |  4  |
+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10

         ^
         |
         |
     +---+--+
ptr  | 0x04 |
     +------+
```

<!-- slide -->
``` C
printf("%d", *ptr++); // 1
```

```ditaa {cmd=true args=["-E"]}
+-----+-----+-----+-----+-----+
|  0  |  1  |  2  |  3  |  4  |
+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10

         ^
         |
         |
     +---+--+
ptr  | 0x04 |
     +------+
```

<!-- slide -->
``` C
printf("%d", *ptr++);
```

```ditaa {cmd=true args=["-E"]}
+-----+-----+-----+-----+-----+
|  0  |  1  |  2  |  3  |  4  |
+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10

                ^
     +------+   |
ptr  | 0x08 +---+
     +------+
```

<!-- slide -->
``` C
ptr++;
```

```ditaa {cmd=true args=["-E"]}
+-----+-----+-----+-----+-----+
|  0  |  1  |  2  |  3  |  4  |
+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10

                ^
     +------+   |
ptr  | 0x08 +---+
     +------+
```

<!-- slide -->
``` C
printf("%d", *ptr++); // 2
```

```ditaa {cmd=true args=["-E"]}
+-----+-----+-----+-----+-----+
|  0  |  1  |  2  |  3  |  4  |
+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10

                ^
     +------+   |
ptr  | 0x08 +---+
     +------+
```

<!-- slide -->
``` C
printf("%d", *ptr++);
```

```ditaa {cmd=true args=["-E"]}
+-----+-----+-----+-----+-----+
|  0  |  1  |  2  |  3  |  4  |
+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10

                     ^
     +------+        |
ptr  | 0x0c +--------+
     +------+
```

<!-- slide -->
``` C
ptr++;
```

```ditaa {cmd=true args=["-E"]}
+-----+-----+-----+-----+-----+
|  0  |  1  |  2  |  3  |  4  |
+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10

                     ^
     +------+        |
ptr  | 0x0c +--------+
     +------+
```

<!-- slide -->
``` C
printf("%d", *ptr++); // 3
```

```ditaa {cmd=true args=["-E"]}
+-----+-----+-----+-----+-----+
|  0  |  1  |  2  |  3  |  4  |
+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10

                     ^
     +------+        |
ptr  | 0x0c +--------+
     +------+
```

<!-- slide -->
``` C
printf("%d", *ptr++);
```

```ditaa {cmd=true args=["-E"]}
+-----+-----+-----+-----+-----+
|  0  |  1  |  2  |  3  |  4  |
+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10

                           ^
     +------+              |
ptr  | 0x10 +--------------+
     +------+
```

<!-- slide -->
``` C
ptr++;
```

```ditaa {cmd=true args=["-E"]}
+-----+-----+-----+-----+-----+
|  0  |  1  |  2  |  3  |  4  |
+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10

                           ^
     +------+              |
ptr  | 0x10 +--------------+
     +------+
```

<!-- slide -->
``` C
printf("%d", *ptr++); // 4
```

```ditaa {cmd=true args=["-E"]}
+-----+-----+-----+-----+-----+
|  0  |  1  |  2  |  3  |  4  |
+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10

                           ^
     +------+              |
ptr  | 0x10 +--------------+
     +------+
```

<!-- slide -->
``` C
printf("%d", *ptr++);
```

```ditaa {cmd=true args=["-E"]}
+-----+-----+-----+-----+-----+-----+
|  0  |  1  |  2  |  3  |  4  |  X  |
+-----+-----+-----+-----+-----+-----+
  0x00  0x04  0x08  0x0c  0x10  0x14

                                  ^
     +------+                     |
ptr  | 0x14 +---------------------+
     +------+
```

<!-- slide -->
### 題目1-程式碼

``` C
#include <stdio.h>
void outputArr(int arr[], int size){
    int *ptr = arr;
    for(int i = 0; i < size; i++){
        printf("%d ", *arr++);
    }
    printf("\n");
}

int main(){
    int arr[] = {0, 1, 2, 3, 4, 5};
    outputArr(arr, 5);
}
```


<!-- slide -->
*ptr++
二維
雙重指標
size
function pointer
之前的題目
for(ptr+i to ptr + j)
<!-- slide -->
int a; // 一個整型數
int *a; // 一個指向整數的指標
int **a; // 一個指向指標的指標，它指向的指標是指向一個整型數
int a[10]; // 一個有10個整數型的陣列
int *a[10]; // 一個有10個指標的陣列，該指標是指向一個整數型的
int (*a)[10]; // 一個指向有10個整數型陣列的指標
int (*a)(int); // 一個指向函數的指標，該函數有一個整數型參數並返回一個整數
int (*a[10])(int); // 一個有10個指標的陣列，該指標指向一個函數，該函數有一個整數型參數並返回一個整數

<!-- slide -->
## 指標與其他符號

<!-- slide -->
### ++與*的程式碼

a) *ptr++是表示*(ptr++)的意思，就是ptr指向下一個位置所存的值(同arr[i++])。
b)*++ptr是代表ptr先做位址往前移，再取值(同arr[++i])。
c) ++*ptr是表示++(*ptr)之意，即為ptr當下位置的值+1(同++arr[i])。

